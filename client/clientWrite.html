<!DOCTYPE html>
<html>
   <head>
	Client for Writing messages
   </head>
	
   <body>
		
		<script type="module">
		  	// Import the functions you need from the SDKs you need
		  	import { initializeApp } from "https://www.gstatic.com/firebasejs/9.20.0/firebase-app.js";
		  	import { getDatabase, ref, set, child, push, update } from "https://www.gstatic.com/firebasejs/9.20.0/firebase-database.js";

		  	// Your web app's Firebase configuration
			const firebaseConfig = {
				apiKey: "AIzaSyBsyNvH0JlTzldg51uWzkadOnYLpewhYVs",
				authDomain: "creativeproject-12185.firebaseapp.com",
				databaseURL: "https://creativeproject-12185-default-rtdb.europe-west1.firebasedatabase.app",
				projectId: "creativeproject-12185",
				storageBucket: "creativeproject-12185.appspot.com",
				messagingSenderId: "990833384121",
				appId: "1:990833384121:web:72d1040a139abd74655968"
			};

			// Initialize Firebase
			const app = initializeApp(firebaseConfig);
			
			// Create DOM + listener + firebaseWrite

			// ELEMENT 1
			document.body.appendChild(document.createElement('BR'));
			document.body.appendChild(document.createElement('BR'));
			const colorLabel = document.createElement('LABEL');
			colorLabel.innerText = "Color: "
			document.body.appendChild(colorLabel);
			const colorElem = document.createElement('INPUT');
			document.body.appendChild(colorElem);

			colorElem.addEventListener('input', () => {
				const db = getDatabase();
				update(ref(db, 'table/'), {
					color: colorElem.value,
				});
			});

			// ELEMENT 2
			document.body.appendChild(document.createElement('BR'));
			document.body.appendChild(document.createElement('BR'));
			const numberLabel = document.createElement('LABEL');
			numberLabel.innerText = "Number: "
			document.body.appendChild(numberLabel);
			const numberElem = document.createElement('INPUT');
			numberElem.setAttribute('type','range');
			numberElem.setAttribute('min','1');
			numberElem.setAttribute('max','width/2');
			numberElem.setAttribute('value','10');
			document.body.appendChild(numberElem);
			const numberLabel2 = document.createElement('LABEL');
			numberLabel2.innerText = numberElem.value;
			document.body.appendChild(numberLabel2);

			numberElem.addEventListener('input', () => {
				numberLabel2.innerText = numberElem.value;
				const db = getDatabase();
				update(ref(db, 'table/'), {
					number: numberElem.value,
				});
			});

			// ELEMENT 3 - CANVAS
			document.body.appendChild(document.createElement('BR'));
			document.body.appendChild(document.createElement('BR'));
			const canvasLabel = document.createElement('LABEL');
			canvasLabel.innerText = "Canvas: "
			document.body.appendChild(canvasLabel);
			const canvas = document.createElement('CANVAS');
			canvas.width = 300;
			canvas.height = 300;
			canvas.style.border = "1px solid";
			document.body.appendChild(canvas);
			const ctx = canvas.getContext('2d');		
			//ctx.fillStyle = 'rgba(0,255,0,1)';
			//ctx.fillRect(0,0,canvas.width,canvas.height);
			//ctx.fill();
			
			canvas.addEventListener('mousemove', (e) => {
				var rect = canvas.getBoundingClientRect();
				const db = getDatabase();
				update(ref(db, 'table/'), {
					posX: e.clientX - rect.left,
					posY: e.clientY - rect.top
				});
			});
	
			
		</script>
   </body>
</html>
